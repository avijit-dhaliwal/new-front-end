(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73484,e=>{"use strict";let r=(0,e.i(34281).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>r],73484)},10289,e=>{"use strict";var r=e.i(7421),a=e.i(74279),t=e.i(12933),s=e.i(21829),i=e.i(6727),n=e.i(73484),l=e.i(25557);let d=(0,e.i(34281).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var o=e.i(48872),m=e.i(47094);function c(){let{organization:e,membership:c}=(0,t.useOrganization)(),{user:x}=(0,t.useUser)(),[v,b]=(0,m.useState)(null),[u,p]=(0,m.useState)(!1),h=x?.publicMetadata?.kobyRole==="staff",g=c?.role==="org:admin"||c?.role==="org:client_admin"||h;return(0,m.useEffect)(()=>{(async()=>{if(e?.id){p(!0);try{let e=await fetch("/api/portal/check-invite-allowed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentMemberCount:0})});if(e.ok){let r=await e.json();b(r)}}catch(e){console.error("Failed to check membership cap:",e)}finally{p(!1)}}})()},[e?.id]),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto py-10",children:[(0,r.jsxs)(o.default,{href:"/portal",className:"inline-flex items-center gap-2 text-sm font-medium text-[var(--ink-muted)] hover:text-[var(--ink)] transition-colors mb-8",children:[(0,r.jsx)(n.ArrowLeft,{className:"w-4 h-4"}),"Back to portal"]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-muted)]",children:"Team & Access"}),(0,r.jsx)("h1",{className:"mt-3 text-2xl sm:text-3xl font-display font-semibold text-[var(--ink)]",children:"Manage your organization"}),(0,r.jsx)("p",{className:"mt-3 text-sm text-[var(--ink-muted)]",children:"Invite team members and manage roles for your organization."})]}),e&&(0,r.jsx)("div",{className:"rounded-full border border-[var(--line)] bg-[var(--panel)] px-4 py-2 text-xs text-[var(--ink-muted)]",children:e.name})]}),v&&g&&(0,r.jsx)("div",{className:`mb-8 rounded-2xl border p-4 ${!v.allowed?"border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950":v.remainingSlots<=2?"border-yellow-200 bg-yellow-50 dark:border-yellow-900 dark:bg-yellow-950":"border-[var(--line)] bg-[var(--panel)]"}`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[v.allowed?(0,r.jsx)(d,{className:"w-5 h-5 text-[var(--ink-muted)]"}):(0,r.jsx)(l.AlertTriangle,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:[v.currentMemberCount," / ",v.maxMembers," members"]}),(0,r.jsx)("p",{className:"text-xs text-[var(--ink-muted)]",children:v.message})]})]}),(0,r.jsx)("div",{className:"hidden sm:block w-32",children:(0,r.jsx)("div",{className:"h-2 bg-[var(--paper-muted)] rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:`h-full transition-all ${!v.allowed?"bg-red-500":v.remainingSlots<=2?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(100,v.currentMemberCount/v.maxMembers*100)}%`}})})})]})}),h&&(0,r.jsx)("div",{className:"mb-8 rounded-2xl border border-[var(--accent-soft)] bg-[var(--accent-soft)] p-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(s.Shield,{className:"w-5 h-5 text-[var(--accent-strong)]"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"Koby Staff Access"}),(0,r.jsxs)("p",{className:"text-xs text-[var(--ink-muted)]",children:["You have full access to manage this organization as a Koby team member.",v&&` (Staff override: can invite beyond ${v.maxMembers} member cap)`]})]})]})}),!g&&!h&&(0,r.jsx)("div",{className:"mb-8 rounded-2xl border border-[var(--line)] bg-[var(--panel)] p-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(i.Users,{className:"w-5 h-5 text-[var(--ink-muted)]"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"View-Only Access"}),(0,r.jsx)("p",{className:"text-xs text-[var(--ink-muted)]",children:"You can view team members but only admins can invite or manage roles. Contact your organization admin to request elevated permissions."})]})]})}),(0,r.jsxs)("div",{className:"mb-8 rounded-2xl border border-[var(--line)] bg-[var(--panel)] p-6",children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--ink-muted)] mb-4",children:"Role Definitions"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"rounded-xl border border-[var(--line)] bg-[var(--paper-muted)] p-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"Client Admin"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-[var(--ink-muted)]",children:"Full access to portal data. Can invite members, manage roles, and configure settings."})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-[var(--line)] bg-[var(--paper-muted)] p-4",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"Client Viewer"}),(0,r.jsx)("p",{className:"mt-1 text-xs text-[var(--ink-muted)]",children:"Read-only access to portal data. Cannot invite members or change settings."})]})]})]}),(0,r.jsx)("div",{className:"rounded-3xl border border-[var(--line)] bg-[var(--panel)] p-6 shadow-[var(--shadow-soft)]",children:(0,r.jsx)(a.OrganizationProfile,{appearance:{elements:{rootBox:"w-full",card:"shadow-none border-0 bg-transparent",navbar:"hidden",pageScrollBox:"p-0",profileSection:"border-[var(--line)]",profileSectionTitle:"text-[var(--ink)]",profileSectionTitleText:"text-sm font-semibold",profileSectionContent:"text-[var(--ink-muted)]",accordionTriggerButton:"text-[var(--ink)]",formButtonPrimary:"bg-[var(--accent-strong)] hover:bg-[var(--accent)]",formFieldLabel:"text-[var(--ink)]",formFieldInput:"border-[var(--line)] bg-[var(--paper-muted)]",membershipWidget:"border-[var(--line)]",membersPageInviteButton:g?"":"hidden",tableHead:"text-[var(--ink-muted)]"}},routing:"hash"})})]})}e.s(["default",()=>c],10289)}]);