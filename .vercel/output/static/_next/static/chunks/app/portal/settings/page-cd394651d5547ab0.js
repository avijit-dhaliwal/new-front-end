(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{633:(e,t,r)=>{"use strict";r.d(t,{T5:()=>s.T5,hP:()=>a.hP,kX:()=>s.kX,nO:()=>s.nO,wV:()=>a.wV,yC:()=>n}),r(24763);var a=r(85016),s=r(57424);function n(e,t,r){let s=t.path||(null==r?void 0:r.path);return"path"===(t.routing||(null==r?void 0:r.routing)||"path")?s?{...r,...t,routing:"path"}:a.sb.throw((0,a.kd)(e)):t.path?a.sb.throw((0,a.s7)(e)):{...r,...t,path:void 0}}},1524:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5917:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6191:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},19268:(e,t,r)=>{e.exports=r(44637)},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}}),r.o(a,"useSelectedLayoutSegments")&&r.d(t,{useSelectedLayoutSegments:function(){return a.useSelectedLayoutSegments}})},24589:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]])},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},44637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useRouter",{enumerable:!0,get:function(){return n}});let a=r(12115),s=r(79862);function n(){return(0,a.useContext)(s.RouterContext)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},45105:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(12115),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{color:o="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:u,...m}=r;return(0,a.createElement)("svg",{ref:n,...s,width:i,height:i,stroke:o,strokeWidth:d?24*Number(l)/Number(i):l,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),c].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},47471:(e,t,r)=>{"use strict";r.d(t,{PromisifiedAuthProvider:()=>l,d:()=>d});var a=r(28014),s=r(633),n=r(19268),o=r(12115);let i=o.createContext(null);function l(e){let{authPromise:t,children:r}=e;return o.createElement(i.Provider,{value:t},r)}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,n.useRouter)(),r=o.useContext(i),l=r;return(r&&"then"in r&&(l=o.use(r)),"undefined"!=typeof window)?(0,a.As)({...l,...e}):t?(0,a.As)(e):(0,s.hP)({...l,...e})}},47937:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]])},50906:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},53854:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]])},59384:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},75501:(e,t,r)=>{Promise.resolve().then(r.bind(r,83596))},83596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>I});var a=r(95155),s=r(12115),n=r(52619),o=r.n(n),i=r(20063),l=r(47471),d=r(28014),c=r(59384),u=r(50906),m=r(53854),h=r(47937),x=r(45105);let p=(0,x.A)("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);var v=r(1524),g=r(91169),f=r(24589),b=r(35626),y=r(5917);let k=(0,x.A)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var j=r(91078),w=r(6191);let N=(0,x.A)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),_=(0,x.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);var A=r(87358);let C={branding:{logo_url:void 0,primary_color:void 0,company_name:void 0},enabled_modules:["overview","engines","insights","team"],settings:{},custom_cards:[{id:"chat_volume",title:"Chat volume",value:"--",note:"Messages this month",order:0},{id:"resolution_rate",title:"Resolution rate",value:"--",note:"Without escalation",order:1},{id:"avg_response",title:"Avg response time",value:"--",note:"First response",order:2}]},P={branding:{logo_url:void 0,primary_color:void 0,company_name:void 0},enabled_modules:["overview","engines","workflows","outcomes","knowledge","integrations","insights","team"],settings:{},custom_cards:[{id:"calls_handled",title:"Calls handled",value:"--",note:"This month",order:0},{id:"chats_resolved",title:"Chats resolved",value:"--",note:"This month",order:1},{id:"leads_qualified",title:"Leads qualified",value:"--",note:"This month",order:2},{id:"appointments",title:"Appointments booked",value:"--",note:"This month",order:3},{id:"automation_hours",title:"Automation hours saved",value:"--",note:"Across all workflows",order:4},{id:"response_time",title:"Avg response time",value:"--",note:"Voice and chat combined",order:5}]},S=[{id:"overview",label:"Overview",description:"Key metrics and status at a glance",icon:"LayoutDashboard"},{id:"engines",label:"Live Ops",description:"Real-time engine status and health",icon:"Activity"},{id:"workflows",label:"Automations",description:"Active workflows and their outcomes",icon:"Workflow"},{id:"outcomes",label:"Outcomes",description:"Tracked results across inbox, booking, and revenue",icon:"Flag"},{id:"knowledge",label:"Knowledge",description:"RAG performance and guardrail triggers",icon:"BookOpen"},{id:"integrations",label:"Integrations",description:"Connected systems and sync status",icon:"Plug"},{id:"insights",label:"Insights",description:"Trends and analytics over time",icon:"TrendingUp"},{id:"team",label:"Team & Access",description:"User management and permissions",icon:"Users"}],M=A.env.NEXT_PUBLIC_PORTAL_WORKER_URL||"";async function O(e,t){if(!M)return console.warn("PORTAL_WORKER_URL not configured"),null;try{var r;let a=await fetch("".concat(M,"/portal/config?orgId=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok){if(404===a.status)return null;throw Error("Failed to fetch config: ".concat(a.status))}return null!=(r=(await a.json()).config)?r:null}catch(e){return console.error("Error fetching portal config:",e),null}}async function R(e,t,r){if(!M)return console.warn("PORTAL_WORKER_URL not configured"),null;try{var a;let s=await fetch("".concat(M,"/portal/config?orgId=").concat(e),{method:"PATCH",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update config: ".concat(s.status));return null!=(a=(await s.json()).config)?a:null}catch(e){return console.error("Error updating portal config:",e),null}}let E={LayoutDashboard:c.A,Activity:u.A,Workflow:m.A,BookOpen:h.A,Plug:p,TrendingUp:v.A,Users:g.A,Flag:f.A},L={orgId:"demo_org",...P,updated_at:new Date().toISOString()};function T(){return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto py-10 space-y-4 animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 w-32 bg-[var(--paper-muted)] rounded"}),(0,a.jsx)("div",{className:"h-10 w-48 bg-[var(--paper-muted)] rounded"}),(0,a.jsx)("div",{className:"h-64 bg-[var(--paper-muted)] rounded-3xl"})]})}function F(){let e=(0,i.useSearchParams)(),{getToken:t}=(0,l.d)(),{organization:r}=(0,d.Z5)(),{user:n}=(0,d.Jd)(),u=e.get("orgId")||(null==r?void 0:r.id)||null,[m,h]=(0,s.useState)(null),[x,p]=(0,s.useState)(!0),[v,g]=(0,s.useState)(!1),[f,A]=(0,s.useState)("idle"),[M,F]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{if(!u||!n)return p(!1);p(!0),F([]);try{let e=await t();if(!e)throw Error("Not authenticated");let r=await O(u,e);r?h(r):h({orgId:u,...P,settings:{},updated_at:new Date().toISOString()})}catch(e){console.error("Failed to load portal config",e),F([e instanceof Error?e.message:"Failed to load configuration"]),h(L)}finally{p(!1)}})()},[u,t,n]);let I=(e,t)=>{h(r=>r?{...r,branding:{...r.branding,[e]:t||null}}:r),A("idle")},z=(e,t,r)=>{h(a=>a?{...a,custom_cards:a.custom_cards.map(a=>a.id===e?{...a,[t]:r}:a)}:a),A("idle")},U=e=>{let t="chatbot_only"===e?C:P;h(e=>e?{...e,...t}:e),A("idle")},V=async()=>{if(!m||!u){F(["Select an organization before saving configuration."]),A("error");return}let e=function(e){let t=[];if(e.branding&&e.branding.primary_color&&!/^#[0-9A-Fa-f]{6}$/.test(e.branding.primary_color)&&t.push("Primary color must be a valid hex color (e.g., #f97316)"),e.enabled_modules){let r=["overview","engines","workflows","outcomes","knowledge","integrations","insights","team"];for(let a of e.enabled_modules)r.includes(a)||t.push("Invalid module: ".concat(a))}if(e.custom_cards)for(let r of e.custom_cards)r.id&&r.title||t.push("Each custom card must have an id and title");return{valid:0===t.length,errors:t}}(m);if(!e.valid){F(e.errors),A("error");return}g(!0),F([]);try{let e=await t();if(!e)throw Error("Not authenticated");let r=await R(u,{branding:m.branding,enabled_modules:m.enabled_modules,custom_cards:m.custom_cards,settings:m.settings||{}},e);r&&h(r),A("success"),setTimeout(()=>A("idle"),2e3)}catch(e){A("error"),F([e instanceof Error?e.message:"Failed to save configuration. Please try again."])}finally{g(!1)}};return u?x||!m?(0,a.jsx)(T,{}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-10 py-10",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o(),{href:"/portal",className:"inline-flex items-center gap-2 text-sm text-[var(--ink-muted)] hover:text-[var(--ink)] mb-3",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),"Back to Portal"]}),(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-display font-semibold text-[var(--ink)]",children:"Portal Settings"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-[var(--ink-muted)]",children:"Configure branding, modules, and custom metrics for this client."})]}),(0,a.jsx)("button",{onClick:V,disabled:v,className:"inline-flex items-center gap-2 rounded-full bg-[var(--accent)] px-5 py-2.5 text-sm font-semibold text-white hover:bg-[var(--accent-strong)] disabled:opacity-50 transition-colors",children:v?"Saving...":"success"===f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.A,{className:"w-4 h-4"}),"Saved"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(k,{className:"w-4 h-4"}),"Save Changes"]})})]}),M.length>0&&(0,a.jsx)("div",{className:"rounded-2xl border border-red-200 bg-red-50 p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(j.A,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-red-800",children:"Please fix the following errors:"}),(0,a.jsx)("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:M.map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]})}),(0,a.jsxs)("section",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--ink)] mb-4",children:"Quick Presets"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{onClick:()=>U("chatbot_only"),className:"rounded-xl border border-[var(--line)] bg-[var(--panel)] px-4 py-2.5 text-sm text-[var(--ink)] hover:bg-[var(--paper-muted)] transition-colors",children:"Chatbot Only"}),(0,a.jsx)("button",{onClick:()=>U("full_suite"),className:"rounded-xl border border-[var(--line)] bg-[var(--panel)] px-4 py-2.5 text-sm text-[var(--ink)] hover:bg-[var(--paper-muted)] transition-colors",children:"Full AI Suite"})]})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-[var(--line)] bg-[var(--panel)] p-6 shadow-[var(--shadow-soft)]",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--ink)] mb-6",children:"Branding"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--ink)] mb-2",children:"Company Name"}),(0,a.jsx)("input",{type:"text",value:m.branding.company_name||"",onChange:e=>I("company_name",e.target.value),placeholder:"Enter company name",className:"w-full rounded-xl border border-[var(--line)] bg-[var(--paper)] px-4 py-2.5 text-sm text-[var(--ink)] placeholder:text-[var(--ink-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--ink)] mb-2",children:"Primary Color"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"color",value:m.branding.primary_color||"#f97316",onChange:e=>I("primary_color",e.target.value),className:"w-12 h-10 rounded-lg border border-[var(--line)] cursor-pointer"}),(0,a.jsx)("input",{type:"text",value:m.branding.primary_color||"#f97316",onChange:e=>I("primary_color",e.target.value),placeholder:"#f97316",className:"flex-1 rounded-xl border border-[var(--line)] bg-[var(--paper)] px-4 py-2.5 text-sm text-[var(--ink)] placeholder:text-[var(--ink-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent font-mono"})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-[var(--ink)] mb-2",children:"Logo URL"}),(0,a.jsx)("input",{type:"url",value:m.branding.logo_url||"",onChange:e=>I("logo_url",e.target.value),placeholder:"https://example.com/logo.png",className:"w-full rounded-xl border border-[var(--line)] bg-[var(--paper)] px-4 py-2.5 text-sm text-[var(--ink)] placeholder:text-[var(--ink-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)] focus:border-transparent"})]})]})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-[var(--line)] bg-[var(--panel)] p-6 shadow-[var(--shadow-soft)]",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--ink)] mb-2",children:"Enabled Modules"}),(0,a.jsx)("p",{className:"text-sm text-[var(--ink-muted)] mb-6",children:"Toggle which sections appear in this client's portal."}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:S.map(e=>{let t=E[e.icon]||c.A,r=m.enabled_modules.includes(e.id);return(0,a.jsxs)("button",{onClick:()=>{var t;return t=e.id,void(h(e=>{if(!e)return e;let r=e.enabled_modules.includes(t);return{...e,enabled_modules:r?e.enabled_modules.filter(e=>e!==t):[...e.enabled_modules,t]}}),A("idle"))},className:"flex items-start gap-4 rounded-2xl border p-4 text-left transition-colors ".concat(r?"border-[var(--accent)] bg-[var(--accent-soft)]":"border-[var(--line)] bg-[var(--paper)] hover:bg-[var(--paper-muted)]"),children:[(0,a.jsx)("div",{className:"rounded-xl p-2 ".concat(r?"bg-[var(--accent)]":"bg-[var(--paper-muted)]"),children:(0,a.jsx)(t,{className:"w-5 h-5 ".concat(r?"text-white":"text-[var(--ink-muted)]")})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-semibold ".concat(r?"text-[var(--accent-strong)]":"text-[var(--ink)]"),children:e.label}),(0,a.jsx)("p",{className:"text-xs text-[var(--ink-muted)] mt-0.5",children:e.description})]}),(0,a.jsx)("div",{className:"w-5 h-5 rounded-full border-2 flex items-center justify-center ".concat(r?"border-[var(--accent)] bg-[var(--accent)]":"border-[var(--line)]"),children:r&&(0,a.jsx)(y.A,{className:"w-3 h-3 text-white"})})]},e.id)})})]}),(0,a.jsxs)("section",{className:"rounded-3xl border border-[var(--line)] bg-[var(--panel)] p-6 shadow-[var(--shadow-soft)]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-[var(--ink)]",children:"Custom Metric Cards"}),(0,a.jsx)("p",{className:"text-sm text-[var(--ink-muted)] mt-1",children:"Configure the metrics shown in the Overview section."})]}),(0,a.jsxs)("button",{onClick:()=>{if(!m)return;let e={id:"card_".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,11)),title:"New metric",value:"--",note:"",order:m.custom_cards.length};h(t=>t?{...t,custom_cards:[...t.custom_cards,e]}:t),A("idle")},className:"inline-flex items-center gap-2 rounded-xl border border-[var(--line)] bg-[var(--paper)] px-4 py-2 text-sm text-[var(--ink)] hover:bg-[var(--paper-muted)] transition-colors",children:[(0,a.jsx)(w.A,{className:"w-4 h-4"}),"Add Card"]})]}),(0,a.jsx)("div",{className:"space-y-3",children:m.custom_cards.sort((e,t)=>e.order-t.order).map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-2xl border border-[var(--line)] bg-[var(--paper)] p-4",children:[(0,a.jsx)("div",{className:"flex flex-col gap-1",children:(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void(h(e=>{if(!e)return e;let r=[...e.custom_cards].sort((e,t)=>e.order-t.order),a=r.findIndex(e=>e.id===t);if(0===a)return e;let s=a-1,n=r[a].order;return r[a].order=r[s].order,r[s].order=n,{...e,custom_cards:r}}),A("idle"))},disabled:0===t,className:"p-1 text-[var(--ink-muted)] hover:text-[var(--ink)] disabled:opacity-30",children:(0,a.jsx)(N,{className:"w-4 h-4"})})}),(0,a.jsxs)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-3",children:[(0,a.jsx)("input",{type:"text",value:e.title,onChange:t=>z(e.id,"title",t.target.value),placeholder:"Metric title",className:"rounded-lg border border-[var(--line)] bg-[var(--panel)] px-3 py-2 text-sm text-[var(--ink)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),(0,a.jsx)("input",{type:"text",value:e.value,onChange:t=>z(e.id,"value",t.target.value),placeholder:"Value",className:"rounded-lg border border-[var(--line)] bg-[var(--panel)] px-3 py-2 text-sm text-[var(--ink)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"}),(0,a.jsx)("input",{type:"text",value:e.note||"",onChange:t=>z(e.id,"note",t.target.value),placeholder:"Note (optional)",className:"rounded-lg border border-[var(--line)] bg-[var(--panel)] px-3 py-2 text-sm text-[var(--ink-muted)] focus:outline-none focus:ring-2 focus:ring-[var(--accent)]"})]}),(0,a.jsx)("button",{onClick:()=>{var t;return t=e.id,void(h(e=>e?{...e,custom_cards:e.custom_cards.filter(e=>e.id!==t).map((e,t)=>({...e,order:t}))}:e),A("idle"))},className:"p-2 text-[var(--ink-muted)] hover:text-red-600 transition-colors",children:(0,a.jsx)(_,{className:"w-4 h-4"})})]},e.id))}),0===m.custom_cards.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-[var(--ink-muted)]",children:[(0,a.jsx)("p",{className:"text-sm",children:"No custom cards configured."}),(0,a.jsx)("p",{className:"text-xs mt-1",children:'Click "Add Card" to create one.'})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,a.jsx)(o(),{href:"/portal",className:"rounded-full border border-[var(--line)] bg-[var(--panel)] px-5 py-2.5 text-sm font-semibold text-[var(--ink)] hover:bg-[var(--paper-muted)] transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:V,disabled:v,className:"inline-flex items-center gap-2 rounded-full bg-[var(--accent)] px-5 py-2.5 text-sm font-semibold text-white hover:bg-[var(--accent-strong)] disabled:opacity-50 transition-colors",children:v?"Saving...":"Save Changes"})]})]}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto py-10 space-y-4",children:[(0,a.jsxs)(o(),{href:"/portal",className:"inline-flex items-center gap-2 text-sm text-[var(--ink-muted)] hover:text-[var(--ink)]",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),"Back to Portal"]}),(0,a.jsxs)("div",{className:"rounded-3xl border border-[var(--line)] bg-[var(--panel)] p-6",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"Select an organization"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-[var(--ink-muted)]",children:"Choose a client from the portal before configuring settings."})]})]})}function I(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)(T,{}),children:(0,a.jsx)(F,{})})}},91078:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},91169:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},e=>{e.O(0,[7141,2619,8441,1255,7358],()=>e(e.s=75501)),_N_E=e.O()}]);