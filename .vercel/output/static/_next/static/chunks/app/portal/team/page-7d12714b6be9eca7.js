(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8947],{633:(e,t,r)=>{"use strict";r.d(t,{T5:()=>n.T5,hP:()=>a.hP,kX:()=>n.kX,nO:()=>n.nO,wV:()=>a.wV,yC:()=>s}),r(24763);var a=r(85016),n=r(57424);function s(e,t,r){let n=t.path||(null==r?void 0:r.path);return"path"===(t.routing||(null==r?void 0:r.routing)||"path")?n?{...r,...t,routing:"path"}:a.sb.throw((0,a.kd)(e)):t.path?a.sb.throw((0,a.s7)(e)):{...r,...t,path:void 0}}},9582:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},11526:(e,t,r)=>{"use strict";r.d(t,{APIKeys:()=>a.Lq,CreateOrganization:()=>a.ul,GoogleOneTap:()=>a.PQ,OrganizationList:()=>a.oE,OrganizationProfile:()=>c,OrganizationSwitcher:()=>a.NC,PricingTable:()=>a.nm,SignIn:()=>u,SignInButton:()=>a.hZ,SignInWithMetamaskButton:()=>a.M_,SignOutButton:()=>a.ct,SignUp:()=>m,SignUpButton:()=>a.Ny,TaskChooseOrganization:()=>a.i9,TaskResetPassword:()=>a.eN,UserAvatar:()=>a.H8,UserButton:()=>a.uF,UserProfile:()=>d,Waitlist:()=>a.cP});var a=r(28014),n=r(12115),s=r(633),i=r(12796),o=r(79194);function l(e,t,d=!0){let c=(()=>{let e=n.useRef(),{pagesRouter:t}=(0,o.r)();if(t)if(e.current)return e.current;else return e.current=t.pathname.replace(/\/\[\[\.\.\..*/,""),e.current;let a=r(20063).usePathname,s=r(20063).useParams,i=(a()||"").split("/").filter(Boolean),l=Object.values(s()||{}).filter(e=>Array.isArray(e)).flat(1/0);return e.current||(e.current=`/${i.slice(0,i.length-l.length).join("/")}`),e.current})(),u=(0,s.yC)(e,t,{path:c});return((e,t,r,s=!0)=>{let l=n.useRef(0),{pagesRouter:d}=(0,o.r)(),{session:c,isLoaded:u}=(0,a.wV)();(0,i.Fj)()||n.useEffect(()=>{if(!u||r&&"path"!==r||s&&!c)return;let a=new AbortController,n=()=>{let r=d?`${t}/[[...index]].tsx`:`${t}/[[...rest]]/page.tsx`;throw Error(`
Clerk: The <${e}/> component is not configured correctly. The most likely reasons for this error are:

1. The "${t}" route is not a catch-all route.
It is recommended to convert this route to a catch-all route, eg: "${r}". Alternatively, you can update the <${e}/> component to use hash-based routing by setting the "routing" prop to "hash".

2. The <${e}/> component is mounted in a catch-all route, but all routes under "${t}" are protected by the middleware.
To resolve this, ensure that the middleware does not protect the catch-all route or any of its children. If you are using the "createRouteMatcher" helper, consider adding "(.*)" to the end of the route pattern, eg: "${t}(.*)". For more information, see: https://clerk.com/docs/reference/nextjs/clerk-middleware#create-route-matcher
`)};return d?d.pathname.match(/\[\[\.\.\..+]]/)||n():(async()=>{let t;if(l.current++,!(l.current>1)){try{let r=`${window.location.origin}${window.location.pathname}/${e}_clerk_catchall_check_${Date.now()}`;t=await fetch(r,{signal:a.signal})}catch{}(null==t?void 0:t.status)===404&&n()}})(),()=>{l.current>1&&a.abort()}},[u])})(e,c,u.routing,d),u}let d=Object.assign(e=>n.createElement(a.Fv,{...l("UserProfile",e)}),{...a.Fv}),c=Object.assign(e=>n.createElement(a.nC,{...l("OrganizationProfile",e)}),{...a.nC}),u=e=>n.createElement(a.Ls,{...l("SignIn",e,!1)}),m=e=>n.createElement(a.Hx,{...l("SignUp",e,!1)})},17910:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},19268:(e,t,r)=>{e.exports=r(44637)},20063:(e,t,r)=>{"use strict";var a=r(47260);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}}),r.o(a,"useSelectedLayoutSegments")&&r.d(t,{useSelectedLayoutSegments:function(){return a.useSelectedLayoutSegments}})},35626:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35727:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(95155),n=r(28014),s=r(11526),i=r(35626),o=r(9582);let l=(0,r(45105).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var d=r(17910),c=r(91169),u=r(52619),m=r.n(u),h=r(12115);function x(){var e;let{organization:t,membership:r}=(0,n.Z5)(),{user:u}=(0,n.Jd)(),[x,p]=(0,h.useState)(null),[v,b]=(0,h.useState)(!1),g=(null==u||null==(e=u.publicMetadata)?void 0:e.kobyRole)==="staff",f=(null==r?void 0:r.role)==="org:admin"||(null==r?void 0:r.role)==="org:client_admin"||g;return(0,h.useEffect)(()=>{(async()=>{if(null==t?void 0:t.id){b(!0);try{let e=await fetch("/api/portal/check-invite-allowed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentMemberCount:0})});if(e.ok){let t=await e.json();p(t)}}catch(e){console.error("Failed to check membership cap:",e)}finally{b(!1)}}})()},[null==t?void 0:t.id]),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto py-10",children:[(0,a.jsxs)(m(),{href:"/portal",className:"inline-flex items-center gap-2 text-sm font-medium text-[var(--ink-muted)] hover:text-[var(--ink)] transition-colors mb-8",children:[(0,a.jsx)(i.A,{className:"w-4 h-4"}),"Back to portal"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-[var(--ink-muted)]",children:"Team & Access"}),(0,a.jsx)("h1",{className:"mt-3 text-2xl sm:text-3xl font-display font-semibold text-[var(--ink)]",children:"Manage your organization"}),(0,a.jsx)("p",{className:"mt-3 text-sm text-[var(--ink-muted)]",children:"Invite team members and manage roles for your organization."})]}),t&&(0,a.jsx)("div",{className:"rounded-full border border-[var(--line)] bg-[var(--panel)] px-4 py-2 text-xs text-[var(--ink-muted)]",children:t.name})]}),x&&f&&(0,a.jsx)("div",{className:"mb-8 rounded-2xl border p-4 ".concat(x.allowed?x.remainingSlots<=2?"border-yellow-200 bg-yellow-50 dark:border-yellow-900 dark:bg-yellow-950":"border-[var(--line)] bg-[var(--panel)]":"border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[x.allowed?(0,a.jsx)(l,{className:"w-5 h-5 text-[var(--ink-muted)]"}):(0,a.jsx)(o.A,{className:"w-5 h-5 text-red-600 dark:text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:[x.currentMemberCount," / ",x.maxMembers," members"]}),(0,a.jsx)("p",{className:"text-xs text-[var(--ink-muted)]",children:x.message})]})]}),(0,a.jsx)("div",{className:"hidden sm:block w-32",children:(0,a.jsx)("div",{className:"h-2 bg-[var(--paper-muted)] rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full transition-all ".concat(x.allowed?x.remainingSlots<=2?"bg-yellow-500":"bg-green-500":"bg-red-500"),style:{width:"".concat(Math.min(100,x.currentMemberCount/x.maxMembers*100),"%")}})})})]})}),g&&(0,a.jsx)("div",{className:"mb-8 rounded-2xl border border-[var(--accent-soft)] bg-[var(--accent-soft)] p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(d.A,{className:"w-5 h-5 text-[var(--accent-strong)]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"Koby Staff Access"}),(0,a.jsxs)("p",{className:"text-xs text-[var(--ink-muted)]",children:["You have full access to manage this organization as a Koby team member.",x&&" (Staff override: can invite beyond ".concat(x.maxMembers," member cap)")]})]})]})}),!f&&!g&&(0,a.jsx)("div",{className:"mb-8 rounded-2xl border border-[var(--line)] bg-[var(--panel)] p-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 text-[var(--ink-muted)]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"View-Only Access"}),(0,a.jsx)("p",{className:"text-xs text-[var(--ink-muted)]",children:"You can view team members but only admins can invite or manage roles. Contact your organization admin to request elevated permissions."})]})]})}),(0,a.jsxs)("div",{className:"mb-8 rounded-2xl border border-[var(--line)] bg-[var(--panel)] p-6",children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-[var(--ink-muted)] mb-4",children:"Role Definitions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-[var(--line)] bg-[var(--paper-muted)] p-4",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"Client Admin"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-[var(--ink-muted)]",children:"Full access to portal data. Can invite members, manage roles, and configure settings."})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-[var(--line)] bg-[var(--paper-muted)] p-4",children:[(0,a.jsx)("p",{className:"text-sm font-semibold text-[var(--ink)]",children:"Client Viewer"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-[var(--ink-muted)]",children:"Read-only access to portal data. Cannot invite members or change settings."})]})]})]}),(0,a.jsx)("div",{className:"rounded-3xl border border-[var(--line)] bg-[var(--panel)] p-6 shadow-[var(--shadow-soft)]",children:(0,a.jsx)(s.OrganizationProfile,{appearance:{elements:{rootBox:"w-full",card:"shadow-none border-0 bg-transparent",navbar:"hidden",pageScrollBox:"p-0",profileSection:"border-[var(--line)]",profileSectionTitle:"text-[var(--ink)]",profileSectionTitleText:"text-sm font-semibold",profileSectionContent:"text-[var(--ink-muted)]",accordionTriggerButton:"text-[var(--ink)]",formButtonPrimary:"bg-[var(--accent-strong)] hover:bg-[var(--accent)]",formFieldLabel:"text-[var(--ink)]",formFieldInput:"border-[var(--line)] bg-[var(--paper-muted)]",membershipWidget:"border-[var(--line)]",membersPageInviteButton:f?"":"hidden",tableHead:"text-[var(--ink-muted)]"}},routing:"hash"})})]})}},44637:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useRouter",{enumerable:!0,get:function(){return s}});let a=r(12115),n=r(79862);function s(){return(0,a.useContext)(n.RouterContext)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},45105:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(12115),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{color:i="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:u,...m}=r;return(0,a.createElement)("svg",{ref:s,...n,width:o,height:o,stroke:i,strokeWidth:d?24*Number(l)/Number(o):l,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),c].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},76465:(e,t,r)=>{Promise.resolve().then(r.bind(r,35727))},79194:(e,t,r)=>{"use strict";r.d(t,{r:()=>n});var a=r(19268);let n=()=>({pagesRouter:(0,a.useRouter)()})},91169:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(45105).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},e=>{e.O(0,[7141,2619,8441,1255,7358],()=>e(e.s=76465)),_N_E=e.O()}]);